{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì»¤ë®¤ë‹ˆí‹°</title>
</head>
<body>

<div style="display: flex;">
  <!-- âœ… ì™¼ìª½ ì‚¬ì´ë“œë°” -->
  <aside style="width: 250px;">
    <div>
      <img src="{% static 'images/default_profile.png' %}" width="80">
      <p>{{ user.nickname }} ë‹˜ì˜ í™œë™</p>
      <div>

  
  <p>
    <span style="cursor: pointer;" onclick="openModal('myPostsModal')" title="ë‚´ê°€ ì“´ ê¸€">ğŸ“</span>
    {{ user.community_set.count }} ì‘ì„±
  </p>

  <p>
    <span style="cursor: pointer;" onclick="openModal('likedPostsModal')" title="ì¢‹ì•„ìš”í•œ ê¸€">â¤ï¸</span>
    {{ user.like_communities.count }} ì¢‹ì•„ìš”
  </p>
</div>
  <a href="{% url 'community:create' %}">ê¸€ì“°ê¸°</a>
    </div>
  </aside>

  <!-- âœ… ì˜¤ë¥¸ìª½ ê²Œì‹œê¸€ ë¦¬ìŠ¤íŠ¸ -->
 <main style="flex: 1; padding-left: 30px;">

  {% for c in community %}
    <div style="border: 1px solid #ccc; padding: 10px; margin-bottom: 20px;">
      <h2>{{ c.title }}</h2>
      <p>{{ c.content|truncatewords:20 }}</p>
      <p>â¤ï¸ {{ c.like_users.count }}</p>
      <a href="{% url 'community:detail' c.pk %}">ìì„¸íˆ ë³´ê¸°</a>
    </div>
  {% endfor %}
</main>
</div>

<!-- âœ… ë‚´ê°€ ì“´ ê¸€ ëª¨ë‹¬ -->
<div id="myPostsModal" class="modal" style="display:none; position:fixed; top:20%; left:35%; background:white; border:1px solid #ccc; padding:20px;">
  <h3>ë‚´ê°€ ì“´ ê¸€</h3>
  <ul>
    {% for post in user_posts %}
      <li><a href="{% url 'community:detail' post.pk %}">{{ post.title }}</a></li>
    {% empty %}
      <li>ì‘ì„±í•œ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</li>
    {% endfor %}
  </ul>
  <button onclick="closeModal('myPostsModal')">ë‹«ê¸°</button>
</div>

<!-- âœ… ì¢‹ì•„ìš”í•œ ê¸€ ëª¨ë‹¬ -->
<div id="likedPostsModal" class="modal" style="display:none; position:fixed; top:20%; left:35%; background:white; border:1px solid #ccc; padding:20px;">
  <h3>ì¢‹ì•„ìš”í•œ ê¸€</h3>
  <ul>
    {% for post in liked_posts %}
      <li><a href="{% url 'community:detail' post.pk %}">{{ post.title }}</a></li>
    {% empty %}
      <li>ì¢‹ì•„ìš”í•œ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</li>
    {% endfor %}
  </ul>
  <button onclick="closeModal('likedPostsModal')">ë‹«ê¸°</button>
</div>

<!-- âœ… ëª¨ë‹¬ ìŠ¤í¬ë¦½íŠ¸ -->
<script>
function openModal(id) {
  document.getElementById(id).style.display = 'block';
}
function closeModal(id) {
  document.getElementById(id).style.display = 'none';
}
</script>

</body>
</html>
